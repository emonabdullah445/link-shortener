import n from"react";var o=require("qrcode");function t(){var t=function(t){var e=t.text,r=t.options,i=t.logo,u=n.useRef(null);return n.useEffect((function(){var n,t,l,v,c,f,a;if(u&&u.current&&(o.toCanvas(u.current,e,r,(function(n){if(n)throw n})),i)){var d=u.current.getContext("2d");if(d){var s=new Image;s.src=i.src;var m=(null===(n=null==i?void 0:i.options)||void 0===n?void 0:n.width)||30;if((null===(t=null==i?void 0:i.options)||void 0===t?void 0:t.x)&&(null===(l=null==i?void 0:i.options)||void 0===l?void 0:l.y)){var p=null===(v=null==i?void 0:i.options)||void 0===v?void 0:v.x,g=null===(c=null==i?void 0:i.options)||void 0===c?void 0:c.y;s.onload=function(){d.drawImage(s,p,g,m,m)}}else if(!(null===(f=null==i?void 0:i.options)||void 0===f?void 0:f.x)||!(null===(a=null==i?void 0:i.options)||void 0===a?void 0:a.y)){var w=null==r?void 0:r.margin;w=w?8*w:0===w?0:32;var x=(((null==r?void 0:r.width)||116+w)-m)/2;s.onload=function(){d.drawImage(s,x,x,m,m)}}}}}),[u,e,r,i]),n.createElement("canvas",{ref:u})};return n.useMemo((function(){return t}),[])}function e(){var e,r;return{Image:(e=function(t){var e=t.text,r=t.options,i=n.useRef(null);return n.useEffect((function(){i&&i.current&&o.toDataURL(e,r,(function(n,o){if(n)throw n;i.current instanceof HTMLImageElement&&(i.current.src=o)}))}),[e,r,i]),n.createElement("img",{ref:i})},n.useMemo((function(){return e}),[])),Canvas:t(),SVG:(r=function(t){var e=t.text,r=t.options,i=n.useRef(null);return n.useEffect((function(){o.toString(e,r,(function(n,o){if(n)throw n;i.current instanceof HTMLDivElement&&(i.current.innerHTML=o)}))}),[e,r]),n.createElement("div",{ref:i})},n.useMemo((function(){return r}),[]))}}export{e as useQRCode};
